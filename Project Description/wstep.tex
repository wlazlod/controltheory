\chapter{Proces projektowania}

\section{Sprawdzenie zachowania symulowanego obiektu bez regulatora dyskretnego}
\subsection{Analiza transmitancji obiektu}

Transmitancja ma postaæ:
\begin{center}
\( G(s)= \frac{150}{s(1.12s+1)(0.224s+1)}  \) \\
\end{center}
Obiekt mo¿na zatem przedstawiæ w postaci superpozycji cz³onu proporcjonalnego, cz³onu ca³kuj¹cego idealnego oraz cz³onu inercyjnego 2 rzêdu (b¹dŸ dwóch cz³onów inercyjnych pierwszego rzêdu).

\begin{figure}[H]
\centering
\includegraphics[width=16 cm]{foto/Transmitancja.png}
\caption{Wizualizacja dekompozycji obiektu o transmitancji G }
\label{fig:SCHEMAT}
\end{figure} 
Charakterystyka czêstotliwoœciowa transmitancji:
\begin{figure}[H]
\centering
\includegraphics[width=16 cm]{foto/Bode1.png}
\caption{Charakterystyka czêstotliwoœciowa transmitancji G}
\label{fig:Bode1}
\end{figure} 

\subsection{Dok³adna transmitancja dyskretna obiektu}
\begin{figure}[H]
\centering
\includegraphics[width=16 cm]{foto/HGz.png}
\caption{Obiekt wraz z uk³adami DAC i ADC}
\label{fig:HGz}
\end{figure} 
Korzystaj¹c z wzoru:
\begin{center}
\( HG(z)= \frac{z-1}{z}\mathcal{Z}(\mathcal{L}^{-1} (\frac{G(s)}{s}))= \frac{z-1}{z}\mathcal{D}(\frac{G(s)}{s})\) \\
\end{center}
dla czasu próbkowania \(T_p =0.01 \) otrzymano dok³adn¹ transmitancjê dyskretn¹ obiektu:
\begin{center}
\( HG(z)= \frac{9.833 \cdot 10^{-5} z^2 +  0.0003881 z + 9.573 \cdot 10^{-5}}{z^3 - 2.947 z^2 + 2.895 z - 0.9478}= \frac{9.8327 \cdot 10^{-5} (z+3.683) (z+0.2644)}{(z-1) (z-0.9911) (z-0.9563)} \) \\
\end{center}

\subsection{Transmitancja widmowa}
Korzystaj¹c z zale¿noœci:
\begin{center}
\( HG^*(j\omega )=HG(e^{T_pj\omega}) \)
\end{center}
obliczono transmitancjê widmow¹:
\begin{center}
\( HG^*(j\omega )=\frac{9.8327 \cdot 10^{-5} (e^{0.01j \omega}+3.683) (e^{0.01j \omega}+0.2644)}{(e^{0.01j \omega}-1) (e^{0.01j\omega}-0.9911) (e^{0.01j\omega}-0.9563)} \)
\end{center}
Charakterystyka czêstotliwoœciowa transmitancji:

\begin{figure}[H]
\centering
\includegraphics[width=16 cm]{foto/Bode2.png}
\caption{Charakterystyka czêstotliwoœciowa transmitancji HG*}
\label{fig:Bode2}
\end{figure} 
\begin{figure}[H]
\centering
\includegraphics[width=16 cm]{foto/Bode3.png}
\caption{Charakterystyka czêstotliwoœciowa transmitancji HG* oraz G}
\label{fig:Bode3}
\end{figure} 

\subsection{Transmitancja pseudoczêstotliwoœciowa}
\begin{figure}[H]
\centering
\includegraphics[width=16 cm]{foto/Pseudo.png}
\caption{Proces wyznaczania transmitancji pseudoczêstotliowej}
\label{fig:PSEUDO}
\end{figure} 
Transmitancja pseudoczêstotliwoœciowa ma postaæ:
\begin{center}
\( HG^{w*}(j\nu)= \frac{2.491 \cdot 10^{-5} j\nu^3 -  0.0003881 0.005115 j\nu^2 - 2.962 \cdot 10^{-5}j\nu + 597.8}{j\nu^3 + 5.356 j\nu^2 + 3.985 j\nu}= \frac{9.8327 \cdot 10^{-5} (j\nu+343.8) (j\nu-349.1) (j\nu-200)}{j\nu (j\nu+4.464) (j\nu+0.8929)} \) \\
\end{center}

Przybli¿enie transmitancji pseudoczêstotliwoœciowej:
\begin{center}
\( HG^{w*}_{est}(j\nu)= G(j\nu)(1-\frac{T_p}{2}j\nu)= \frac{-2.9895 (j\nu-200)}{j\nu (j\nu+4.464) (j\nu+0.8929)} = \) \\
\end{center}

\begin{figure}[H]
\centering
\includegraphics[width=16 cm]{foto/Bode4.png}
\caption{Charakterystyka czêstotliwoœciowa transmitancji HGw* oraz HGw*est}
\label{fig:Bode4}
\end{figure} 
\begin{figure}[H]
\centering
\includegraphics[width=16 cm]{foto/Bode5.png}
\caption{Charakterystyka czêstotliwoœciowa transmitancji HGw*, HGw*est, HG* oraz G}
\label{fig:Bode5}
\end{figure} 

\newpage
Listing kodu dla tej czêœci zadania:
\begin{lstlisting}[frame=single]  % Start your code-block
s=tf('s');
Tp=0.01;
G=150/(s*(1.12*s+1)*(0.224*s+1))
HG=c2d(G,Tp);
HGzpk=zpk(HG)
HGW=d2c(HG,'tustin');
HGWzpk=zpk(HGW)
HGWest=G*(1-Tp/2*s);
HGWestzpk=zpk(HGWest)
h=bodeplot(HGW, HGWest)
p=getoptions(h);
p.PhaseMatching='on';
p.PhaseMatchingFreq=1.97;
p.PhaseMatchingValue=-180;
setoptions(h,p);
hold
bodeplot(G, HG)
\end{lstlisting}

\newpage
\section{Projektowanie regulatora}
\subsection{Wyznaczenie obszarów zabronionych}
Korzystaj¹c z definicji wymagañ: \\
\begin{center}
Maksymalna prêdkoœæ: \( r_1=1 \) \\
Maksymalne przyspieszenie: \( r_2=0.8 \) \\
Dok³adnoœæ: \( \varepsilon=0.005 \) \\
\end{center}
obliczam wielkoœci \( \omega _a \) oraz \( L_gr \): \\
\begin{center}
\( \omega_a = \frac{r_2}{r_1}=0.8\) \\
\( L \ge \frac{1}{\epsilon} \frac{(r_1)^2}{r_2}\frac{1.16\cdot 4}{\pi}=369.2 \)
\end{center}
\begin{figure}[H]
\centering
\includegraphics[width=16 cm]{foto/Ograniczenia.png}
\caption{Zaznaczone obszary zabronione wraz z naniesion¹ transmitancj¹ obiektu}
\label{fig:Ograniczenia}
\end{figure} 
\subsection{Wyznaczenie wzmocnienia regulatora}
Na podstawie odczytów z wykresu ustalono wzmocnienie regulatora na \( k = 4\) \\
\begin{figure}[H]
\centering
\includegraphics[width=16 cm]{foto/Ograniczenia2.png}
\caption{Transmitancja razem z regulatorem P}
\label{fig:Ograniczenia2}
\end{figure} 
\subsection{Wyznaczenie v1 i v2}
Naturalna pseudopulsacja graniczna obiektu:  \( \nu _{gob}=8.04 \): \\
Ograniczenie wynikaj¹ce z istnienia obszarów zabronionych: \( 20< \nu _g < 200 \) \\
Ograniczenie wynikaj¹ce z wprowadzenia opóŸnienia: \( \nu _g < 44 \): \\
Przyjmujê \( \nu _g = 28 \)
co daje \( \omega _g = 27.82 \) \\
Je¿eli przyjmê \( M_p = 1.4 \)
to: \( \nu _1 \le \nu _g \frac{M_p-1}{M_p}= 8; \nu _2 \ge \nu _g \frac{M_p+1}{M_p}= 48\)

Na tej podstawie dobrano: \( \nu _1 = 8 \). Dobór \( \nu _2 \) by³ nieco bardziej skomplikowany. Na rysunkach %\ref{fig:Dobor1} oraz \ref{fig:Dobor2} 
pokazano zale¿noœæ przebiegu amplitudy dla ró¿nych \( \nu _2 \) oraz transmitancjê dla dobranego regulatora o \( \nu _2=48 \).

\begin{figure}[H]
\centering
\includegraphics[width=16 cm]{foto/Dobor.png}
\caption{Zale¿noœæ przebiegu transmitancji L*(jv) od ró¿nych wartoœci v2.}
\label{fig:Dobor1}
\end{figure} 

\begin{figure}[H]
\centering
\includegraphics[width=16 cm]{foto/Dobor2.png}
\caption{Przebieg dobranej transmitancji L}
\label{fig:Dobor2}
\end{figure} 

\subsection{Regulator}

Transmitancja regulatora wynosi:\\ 
\begin{center}
\( R(j \nu)=\frac{4\cdot (\frac{j \nu}{8}+1)^2}{(\frac{j \nu}{48}+1)^2} \)
\end{center}
Transmitancja impulsowa regulatora wynosi:\\ 
\begin{center}
\( R(z)=\frac{143.9 z^2 - 287.9 z + 143,9}{z^3-1.999 z^2 + 0.999 z}\)
\end{center}
Równanie ró¿nicowe:\\
\begin{center}
\(u(k)=1.999u(k-1)-0.999u(k-2) + (143.9e(k-1) - 287.9e(k-2) + 143,9)e(k-3)\)
\end{center}


